
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ISCC2019杂项题(MISC)总结 - 且听风吟</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="Saying and doing are two different things.,ISCC2019刚刚结束，作为一个萌新我是真的菜，真心菜不过也会几道杂项题，就总结一下做题思路。
Aesop’s secret下载附件，打开一张gif图用PS打开,可以得到一张完整的图做到这里没思路,"> 
    <meta name="author" content="💗zihao"> 
    <link rel="alternative" href="atom.xml" title="且听风吟" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">且听风吟</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="http://bealright.github.io"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle"></h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title"></h1>
        <div class="stuff">
            <span>六月 01, 2019</span>
            

        </div>
        <div class="content markdown">
            <p><strong>要入门web安全，首先就要实战一下，所以就跟着51CTO的孙胜利老师学习PHP好长时间了，终于将这一项目（小项目）给完成了，虽然遇到了很多error，但最后还是做出来了，就记录一下开发过程，顺便再理一遍思路。</strong></p>
<p><strong>开发好后的小型论坛</strong><br><img src="https://img-blog.csdnimg.cn/20190526202116614.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190526202142806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190526202228899.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>看起来还挺清新的，那么接下来就开始整理我的开发之路了。</p>
<p><strong>开发思路：</strong><br><img src="https://img-blog.csdnimg.cn/20190526203525327.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190526203650310.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190526203656554.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>创建后台-父板块</strong><br>首先，我们需要<strong>创建一个数据库</strong>来保存我们的所添加的父板块<br><img src="https://img-blog.csdnimg.cn/20190526204108249.png" alt="在这里插入图片描述"><br>数据库就取名为<code>bbs</code>,创建父板块<code>father_module</code>表，设置三个字段，<code>id</code>,<code>module_name</code>,<code>sort</code>。</p>
<p>数据库创建完成，就开始编写PHP代码，在此之前，我们需要HTML代码用来展示。</p>
<p><img src="https://img-blog.csdnimg.cn/20190526204516723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>大致就是这样，写父板块功能的时候，中间那一部分可以不要，我们只要HTML代码的头部，左边和尾部。为了不让HTML代码重复出现，我们可以将相同的HTML代码防在一个文件中，利用PHP调用即可。<br><img src="https://img-blog.csdnimg.cn/2019052620480959.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在admin目录下创建一个inc文件夹，里面放入后台经常要调用的文件，可以节省代码量。<br>这里把头部的HTML代码放入<code>header.inc.php</code>,左边的HTML代码放入<code>left.inc.php</code>,尾部的HTML代码放入    <code>footer.inc.php</code>。</p>
<p>现在页面搞好了，但我们还需要编写一些数据库相关的函数，比如连接数据库等，如果没有这些函数，创建的数据库也毫无意义。</p>
<p>因为前台和后台都要用到，所以在根目录下再建立一个<code>inc</code>文件夹。<br><img src="https://img-blog.csdnimg.cn/20190526205431346.png" alt="在这里插入图片描述"></p>
<p>下面就开始编写PHP代码，我们首先得连接数据库。<br>连接数据库就取名为<code>config.in.php</code><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">date_default_timezone_set(<span class="string">'Asia/Shanghai'</span>);<span class="comment">//设置时区</span></span><br><span class="line">session_start();<span class="comment">//开启SESSION，验证后台登陆</span></span><br><span class="line">header(<span class="string">'Content-type:text/html;charset=utf-8'</span>);<span class="comment">//设置编码</span></span><br><span class="line">define(<span class="string">'DB_HOST'</span>,<span class="string">'localhost'</span>);<span class="comment">//定义为常量</span></span><br><span class="line">define(<span class="string">'DB_USER'</span>,<span class="string">'用户名'</span>);</span><br><span class="line">define(<span class="string">'DB_PASSWORD'</span>,<span class="string">'密码'</span>);</span><br><span class="line">define(<span class="string">'DB_DATABASE'</span>,<span class="string">'数据库名'</span>);</span><br><span class="line">define(<span class="string">'SA_PATH'</span>,dirname(dirname(<span class="keyword">__FILE__</span>)));</span><br><span class="line">define(<span class="string">'SUB_URL'</span>,str_replace($_SERVER[<span class="string">'DOCUMENT_ROOT'</span>],<span class="string">''</span>,str_replace(<span class="string">'\\'</span>,<span class="string">'/'</span>,SA_PATH)).<span class="string">'/'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>写好之后，我们还需要编写一些MYSQL常用的函数，方便后面开发使用。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">//连接数据库</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">($host=DB_HOST,$user=DB_USER,$password=DB_PASSWORD,$database=DB_DATABASE)</span></span>&#123;</span><br><span class="line">	$link=@mysqli_connect($host, $user, $password, $database);</span><br><span class="line">	<span class="keyword">if</span>(mysqli_connect_errno())&#123;</span><br><span class="line">		<span class="keyword">exit</span>(mysqli_connect_error());</span><br><span class="line">	&#125;</span><br><span class="line">	mysqli_set_charset($link,<span class="string">'utf8'</span>);</span><br><span class="line">	<span class="keyword">return</span> $link;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//执行一条SQL语句,返回结果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execute</span><span class="params">($link,$query)</span></span>&#123;</span><br><span class="line">	$result=mysqli_query($link,$query);</span><br><span class="line">	<span class="keyword">if</span>(mysqli_errno($link))&#123;</span><br><span class="line">		<span class="keyword">exit</span>(mysqli_error($link));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> $result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取记录数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">num</span><span class="params">($link,$sql_count)</span></span>&#123;</span><br><span class="line">	$result=execute($link,$sql_count);</span><br><span class="line">	$count=mysqli_fetch_row($result);</span><br><span class="line">	<span class="keyword">return</span> $count[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//数据入库之前进行转义</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escape</span><span class="params">($link,$data)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(is_string($data))&#123;</span><br><span class="line">		<span class="keyword">return</span> mysqli_real_escape_string($link,$data);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(is_array($data))&#123;</span><br><span class="line">		<span class="keyword">foreach</span> ($data <span class="keyword">as</span> $key=&gt;$val)&#123;</span><br><span class="line">			$data[$key]=escape($link,$val);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> $data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一次性执行多条SQL语句</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 一次性执行多条SQL语句</span></span><br><span class="line"><span class="comment">$link：连接</span></span><br><span class="line"><span class="comment">$arr_sqls：数组形式的多条sql语句</span></span><br><span class="line"><span class="comment">$error：传入一个变量，里面会存储语句执行的错误信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execute_multi</span><span class="params">($link,$arr_sqls,&amp;$error)</span></span>&#123;</span><br><span class="line">	$sqls=implode(<span class="string">';'</span>,$arr_sqls).<span class="string">';'</span>;</span><br><span class="line">	<span class="keyword">if</span>(mysqli_multi_query($link,$sqls))&#123;</span><br><span class="line">		$data=<span class="keyword">array</span>();</span><br><span class="line">		$i=<span class="number">0</span>;<span class="comment">//计数</span></span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>($result=mysqli_store_result($link))&#123;</span><br><span class="line">				$data[$i]=mysqli_fetch_all($result);</span><br><span class="line">				mysqli_free_result($result);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				$data[$i]=<span class="keyword">null</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			$i++;</span><br><span class="line">			<span class="keyword">if</span>(!mysqli_more_results($link)) <span class="keyword">break</span>;</span><br><span class="line">		&#125;<span class="keyword">while</span> (mysqli_next_result($link));</span><br><span class="line">		<span class="keyword">if</span>($i==count($arr_sqls))&#123;</span><br><span class="line">			<span class="keyword">return</span> $data;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			$error=<span class="string">"sql语句执行失败：&lt;br /&gt;&amp;nbsp;数组下标为&#123;$i&#125;的语句:&#123;$arr_sqls[$i]&#125;执行错误&lt;br /&gt;&amp;nbsp;错误原因："</span>.mysqli_error($link);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		$error=<span class="string">'执行失败！请检查首条语句是否正确！&lt;br /&gt;可能的错误原因：'</span>.mysqli_error($link);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//关闭连接</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">close</span><span class="params">($link)</span></span>&#123;</span><br><span class="line">	mysqli_close($link);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这些函数都编号后，就开始我们第一个板块-父板块。<br>我们首先要引用这两个文件，才能调用他们。<br>接下来就开始编写<code>father_module.php</code><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line">$link=connect();<span class="comment">//连接数据库</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span><span class="comment">//引入头部</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span><span class="comment">//引入左边</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span><span class="comment">//引入右边</span></span><br></pre></td></tr></table></figure></p>
<p>这样大致框架就做好了，要求的父板块页面至少包括编辑、排序、删除、这些功能，页面是这样的（有点丑）。<br><img src="https://img-blog.csdnimg.cn/20190601154140522.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>那么接下来就开始在HTML代码中嵌入PHP代码，实现相应的功能。<br><code>father_module.php</code>完整代码如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="comment">//判断用户是否点击排序按钮</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="keyword">foreach</span>($_POST[<span class="string">'sort'</span>] <span class="keyword">as</span> $key=&gt;$val)&#123;</span><br><span class="line">    <span class="comment">//is_numeric() 函数用于检测变量是否为数字或数字字符串</span></span><br><span class="line">        <span class="keyword">if</span>(!is_numeric($val) || !is_numeric($key))&#123;</span><br><span class="line">			skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'排序错误！'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//更新sort中的默认值</span></span><br><span class="line">        $query[]=<span class="string">"update father_module set sort=&#123;$val&#125; where id=&#123;$key&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//mysqli_multi_query() 函数可用来执行多条SQL语句</span></span><br><span class="line"><span class="keyword">if</span>(execute_multi($link,$query,$error))&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'排序修改成功'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,$error);</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    $template[<span class="string">'title'</span>]=<span class="string">'父板块列表页'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">            	&lt;div id=<span class="string">"bg_wrapper"</span>&gt;</span><br><span class="line">                </span><br><span class="line">                    &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                        &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                            &lt;div class="jquery_tab"&gt;</span><br><span class="line">                                &lt;div class="content_block"&gt;</span><br><span class="line">                                    &lt;h2 class="jquery_tab_title"&gt;父板块列表&lt;/h2&gt;</span><br><span class="line">                    &lt;div class="explain"&gt;</span><br><span class="line">                        &lt;ul&gt;</span><br><span class="line">                            &lt;li&gt;添加你所喜欢的φ(*￣<span class="number">0</span>￣)&lt;/li&gt;</span><br><span class="line">                            &lt;li&gt;(o゜▽゜)o☆<span class="string">"(￣y▽,￣)╭ "</span>&lt;/li&gt;</span><br><span class="line">                        &lt;/ul&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;form method=<span class="string">"POST"</span>&gt;</span><br><span class="line">        &lt;table class="list"&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;排序&lt;/th&gt;         </span><br><span class="line">                &lt;th&gt;版块名称&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;版主&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            <span class="meta">&lt;?php</span></span><br><span class="line">            <span class="comment">//查询</span></span><br><span class="line">            $query=<span class="string">"select * from father_module"</span>;</span><br><span class="line">            <span class="comment">//执行</span></span><br><span class="line">            $result=execute($link,$query);</span><br><span class="line">            <span class="keyword">while</span> ($data=mysqli_fetch_assoc($result))&#123;</span><br><span class="line">            <span class="comment">//将字符串以URL编码,用于编码处理</span></span><br><span class="line">            $url=urlencode(<span class="string">"father_module_delete.php?id=&#123;$data['id']&#125;"</span>);</span><br><span class="line">            $return_url=urlencode($_SERVER[<span class="string">'REQUEST_URI'</span>]);</span><br><span class="line">            $message=<span class="string">"要删除父版块 &#123;$data['module_name']&#125; 吗？"</span>;</span><br><span class="line">            <span class="comment">//跳转确认页面，给用户更好的用户体验</span></span><br><span class="line">            $delete_url=<span class="string">"confirm.php?url=&#123;$url&#125;&amp;return_url=&#123;$return_url&#125;&amp;message=&#123;$message&#125;"</span>;</span><br><span class="line">$html=<span class="string">&lt;&lt;&lt;A</span></span><br><span class="line"><span class="string">              &lt;tr&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;&lt;input class="sort" type="text" name="sort[<span class="subst">&#123;$data['id']&#125;</span>]" value="<span class="subst">&#123;$data['sort']&#125;</span>" /&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['module_name']&#125;</span>[id:<span class="subst">&#123;$data['id']&#125;</span>]&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;且听风吟&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;&lt;a href="#"&gt;[访问]&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href="father_module_update.php?id=<span class="subst">&#123;$data['id']&#125;</span>"&gt;[编辑]&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href="<span class="subst">$delete_url</span>"&gt;[删除]&lt;/a&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">             &lt;/tr&gt;</span></span><br><span class="line"><span class="string">A;</span></span><br><span class="line"><span class="keyword">echo</span> $html;</span><br><span class="line">                        &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="排序" /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br></pre></td></tr></table></figure></p>
<p>我们还需要做<code>confirm.php</code>删除确认页面、<code>father_module_update.php</code>编辑功能、<code>father_module_delete.php</code>删除功能<br>先来做一下删除确认页面<br><code>confirm.php</code>代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="comment">//先判断是否传过来有参数</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'message'</span>]) || !<span class="keyword">isset</span>($_GET[<span class="string">'url'</span>]) || !<span class="keyword">isset</span>($_GET[<span class="string">'return_url'</span>]))&#123;</span><br><span class="line">  <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;确认界面&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">@charset <span class="string">"UTF-8"</span>;</span><br><span class="line">@<span class="keyword">use</span> <span class="title">postcss</span>-<span class="title">cssnext</span>;</span><br><span class="line">:root &#123;</span><br><span class="line">  --windmill-dark: <span class="comment">#14222D;</span></span><br><span class="line">  --windmill-medium-dark: <span class="comment">#508BB3;</span></span><br><span class="line">  --windmill-medium: <span class="comment">#6096C4;</span></span><br><span class="line">  --windmill-medium-light: <span class="comment">#649ECD;</span></span><br><span class="line">  --windmill-light: <span class="comment">#B6E2FF;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.windmill &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: <span class="number">800</span>px;</span><br><span class="line">  height: <span class="number">500</span>px;</span><br><span class="line">  margin: auto;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  background: <span class="keyword">var</span>(--windmill-medium-light);</span><br><span class="line">&#125;</span><br><span class="line">....<span class="comment">//css代码太多了，这里就不展示了，只把重要的代码展示出来</span></span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> type=<span class="string">"text/css"</span> href=<span class="string">"style/remind.css"</span> /&gt;</span><br><span class="line">&lt;div class="notice"&gt;&lt;span class="pic ask"&gt;&lt;/span&gt; &lt;?php echo $_GET['message']?&gt; &lt;a style="color:red;" href="&lt;?php echo $_GET['url']?&gt;"&gt;确定&lt;/a&gt; | &lt;a style="color:#666;" href="&lt;?php echo $_GET['return_url']?&gt;"&gt;取消&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601155620358.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>但现在没有删除功能，所以再做删除功能。<br><code>father_module_delete.php</code>代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])||!is_numeric($_GET[<span class="string">'id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'id参数错误!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//从子版块中查询是否有相同的id，如果有的话就不能直接删除</span></span><br><span class="line">$query=<span class="string">"select * from son_module where father_module_id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">$result=execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(mysqli_num_rows($result))&#123;</span><br><span class="line">    skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'板块下有子板块，无法直接删除'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查询数据库中的id是否和传过来的相同</span></span><br><span class="line">$query=<span class="string">"delete from father_module where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">execute($link,$query);</span><br><span class="line"><span class="comment">//mysqli_affected_rows() 函数返回前一次 MySQL 操作（SELECT、INSERT、UPDATE、REPLACE、DELETE）所影响的记录行数</span></span><br><span class="line"><span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'删除成功'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起删除失败，请重试！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>下面就是编辑页面了<br><code>father_module_update.php</code>编辑页面<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line"></span><br><span class="line">$link=connect();</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'管理员编辑页'</span>;</span><br><span class="line"><span class="comment">//验证</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])||!is_numeric($_GET[<span class="string">'id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'id参数错误！'</span>);</span><br><span class="line">&#125;</span><br><span class="line">$query=<span class="string">"select * from father_module where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">$result=execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(!mysqli_num_rows($result))&#123;</span><br><span class="line">	skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'这条版块信息不存在！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line"><span class="comment">//因为涉及修改，所以我们需要验证，在创建inc中check_father_module.inc.php文件来验证。</span></span><br><span class="line">    $check_flag=<span class="string">'update'</span>;</span><br><span class="line">	<span class="keyword">include</span> <span class="string">'inc/check_father_module.inc.php'</span>;</span><br><span class="line">	<span class="comment">//更新数据</span></span><br><span class="line">    $query=<span class="string">"update father_module set module_name='&#123;$_POST['module_name']&#125;',sort=&#123;$_POST['sort']&#125; where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">    execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">        skip(<span class="string">'father_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'恭喜你，修改成功！'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起，修改失败，请重试！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$data=mysqli_fetch_assoc($result);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bg_wrapper"</span>&gt;     </span><br><span class="line">                &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                    &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                        &lt;div class="jquery_tab"&gt;</span><br><span class="line">                            &lt;div class="content_block"&gt;</span><br><span class="line">                                &lt;h2 class="jquery_tab_title"&gt;修改父板块-&lt;?php echo $data['module_name']?&gt;&lt;/h2&gt;</span><br><span class="line">                &lt;div class="title"&gt;功能说明&lt;/div&gt;</span><br><span class="line">                &lt;div class="explain"&gt;</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;<span class="string">"*★,°*:.☆(￣▽￣)/$:*.°★* 。"</span>(＾Ｕ＾)ノ~ＹＯ&lt;/li&gt;</span><br><span class="line">                    &lt;/ul&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">        &lt;form method=<span class="string">"post"</span>&gt;</span><br><span class="line">                    &lt;table class="au"&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;版块名称&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"module_name"</span> value=<span class="string">"&lt;?php echo $data['module_name']?&gt;"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                版块名称不得为空，最大不得超过<span class="number">66</span>个字符</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;排序&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"sort"</span> value=<span class="string">"&lt;?php echo $data['sort']?&gt;"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                填写一个数字即可</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                    &lt;/table&gt;</span><br><span class="line">    &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="修改" /&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br><span class="line">                           </span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>再编辑一下<code>check_father_module.inc.php</code>验证文件<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">//名字不能为空</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">empty</span>($_POST[<span class="string">'module_name'</span>]))&#123;</span><br><span class="line">      skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'不能为空'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mb_strlen($_POST[<span class="string">'module_name'</span>])&gt;<span class="number">66</span>)&#123;</span><br><span class="line">        skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'版块名称不得多余66个字符！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!is_numeric($_POST[<span class="string">'sort'</span>]))&#123;</span><br><span class="line">        skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'排序只能是数字！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//进行转义</span></span><br><span class="line">    $_POST=escape($link,$_POST);</span><br><span class="line">    <span class="comment">//采用switch 更加方便添加，更新等</span></span><br><span class="line">    <span class="keyword">switch</span> ($check_flag) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">            $query=<span class="string">"select * from father_module where module_name='&#123;$_POST['module_name']&#125;'"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'update'</span>:</span><br><span class="line">            $query=<span class="string">"select * from father_module where module_name='&#123;$_POST['module_name']&#125;' and id!=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'$check_flag参数错误！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    $result=execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_num_rows($result))&#123;</span><br><span class="line">        skip(<span class="string">'father_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'这个版块已经有了！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601160651588.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这样我们就把第一个任务做好了，我们的父板块展示页以及做好了，接下来开始做子版块。</p>
<p><strong>创建后台-子版块</strong><br>首先我们需要先创建子版块表来存放我们的数据。<br>起名为<code>son_module</code><br>创建字段<br><img src="https://img-blog.csdnimg.cn/20190601161350397.png" alt="在这里插入图片描述"><br>接下来，开始写子版块页面。<br><code>son_module</code>代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'子版块列表'</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="comment">//循环语句</span></span><br><span class="line">    <span class="comment">//$key代表id,$val代表sort</span></span><br><span class="line">    <span class="comment">//用var_dump()输出一下就了解了</span></span><br><span class="line">    <span class="keyword">foreach</span>($_POST[<span class="string">'sort'</span>] <span class="keyword">as</span> $key=&gt;$val)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!is_numeric($val) || !is_numeric($key))&#123;</span><br><span class="line">			skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'排序错误！'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">        $query[]=<span class="string">"update son_module set sort=&#123;$val&#125; where id=&#123;$key&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">if</span>(execute_multi($link,$query,$error))&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'排序修改成功'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,$error);</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">            	&lt;div id=<span class="string">"bg_wrapper"</span>&gt;</span><br><span class="line">                </span><br><span class="line">                    &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                        &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                            &lt;div class="jquery_tab"&gt;</span><br><span class="line">                                &lt;div class="content_block"&gt;</span><br><span class="line">                                    &lt;h2 class="jquery_tab_title"&gt;子板块列表&lt;/h2&gt;</span><br><span class="line">                    </span><br><span class="line">                                    &lt;form method=<span class="string">"POST"</span>&gt;</span><br><span class="line">        &lt;table class="list"&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;排序&lt;/th&gt;         </span><br><span class="line">                &lt;th&gt;版块名称&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;所属父板块&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;版主&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            <span class="meta">&lt;?php</span></span><br><span class="line">            <span class="comment">//起一个别名，ssm代表son_module</span></span><br><span class="line">            <span class="comment">//sfm代表father_module，有的起名相同会造成错误</span></span><br><span class="line">            $query=<span class="string">"select ssm.id,ssm.sort,ssm.module_name,sfm.module_name father_module_name,ssm.member_id from son_module ssm,father_module sfm where ssm.father_module_id=sfm.id order by sfm.id"</span>;</span><br><span class="line">            $result=execute($link,$query);</span><br><span class="line">            <span class="keyword">while</span> ($data=mysqli_fetch_assoc($result))&#123;</span><br><span class="line">            $url=urlencode(<span class="string">"son_module_delete.php?id=&#123;$data['id']&#125;"</span>);</span><br><span class="line">            $return_url=urlencode($_SERVER[<span class="string">'REQUEST_URI'</span>]);</span><br><span class="line">            $message=<span class="string">"要删除子版块 &#123;$data['module_name']&#125; 吗？"</span>;</span><br><span class="line">            $delete_url=<span class="string">"confirm.php?url=&#123;$url&#125;&amp;return_url=&#123;$return_url&#125;&amp;message=&#123;$message&#125;"</span>;</span><br><span class="line">$html=<span class="string">&lt;&lt;&lt;A</span></span><br><span class="line"><span class="string">              &lt;tr&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;&lt;input class="sort" type="text" name="sort[<span class="subst">&#123;$data['id']&#125;</span>]" value="<span class="subst">&#123;$data['sort']&#125;</span>" /&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['module_name']&#125;</span>[id:<span class="subst">&#123;$data['id']&#125;</span>]&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['father_module_name']&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['member_id']&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;&lt;a href="#"&gt;[访问]&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href="son_module_update.php?id=<span class="subst">&#123;$data['id']&#125;</span>"&gt;[编辑]&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href="<span class="subst">$delete_url</span>"&gt;[删除]&lt;/a&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">             &lt;/tr&gt;</span></span><br><span class="line"><span class="string">A;</span></span><br><span class="line"><span class="keyword">echo</span> $html;</span><br><span class="line">                        &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="排序" /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;         </span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p> 这里的代码和父板块的查不多，但是有区别的，我们创建的子版块必须是属于其中一个父板块下面的，所以我们在子版块创建的<code>father_module_id</code>就是用来区分该子版块是属于那个父板块的。<br> 实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601161812397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>和父板块一样，这里我们也需要<code>son_module_add.php</code>子版块添加、<code>son_module_delete.php</code>子版块删除、<code>son_module_update.php</code>子板块编辑<br>先来做<code>son_module_add.php</code>子版块添加<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//子板块添加页面</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'子板块添加页面'</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="comment">//验证填写的信息</span></span><br><span class="line">    $check_flag=<span class="string">'add'</span>;</span><br><span class="line">	<span class="keyword">include</span> <span class="string">'inc/check_son_module.inc.php'</span>;</span><br><span class="line">	<span class="comment">// 插入数据</span></span><br><span class="line">    $query=<span class="string">"insert into son_module(father_module_id,module_name,info,member_id,sort) values(&#123;$_POST['father_module_id']&#125;,'&#123;$_POST['module_name']&#125;','&#123;$_POST['info']&#125;',&#123;$_POST['member_id']&#125;,&#123;$_POST['sort']&#125;)"</span>;</span><br><span class="line">    execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">        skip(<span class="string">'son_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'恭喜你，添加成功！'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起，添加失败，请重试！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bg_wrapper"</span>&gt;     </span><br><span class="line">                &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                    &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                        &lt;div class="jquery_tab"&gt;</span><br><span class="line">                            &lt;div class="content_block"&gt;</span><br><span class="line">                                &lt;h2 class="jquery_tab_title"&gt;添加子板块&lt;/h2&gt;</span><br><span class="line">                &lt;div class="explain"&gt;</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;添加你所喜欢的（*＾-＾*）&lt;/li&gt;</span><br><span class="line">                        &lt;li&gt;<span class="string">"*★,°*:.☆(￣▽￣)/$:*.°★* 。"</span>&lt;/li&gt;</span><br><span class="line">                    &lt;/ul&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">        &lt;form method=<span class="string">"post"</span>&gt;</span><br><span class="line">                    &lt;table class="au"&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;所属父板块&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                            &lt;select name=<span class="string">"father_module_id"</span>&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"0"</span>&gt;---选择一个父板块---&lt;/option&gt;</span><br><span class="line">                                <span class="meta">&lt;?php</span></span><br><span class="line">                                $query=<span class="string">"select * from father_module"</span>;</span><br><span class="line">                                $result_father=execute($link,$query);</span><br><span class="line">                                <span class="keyword">while</span>($data_father=mysqli_fetch_assoc($result_father))&#123;</span><br><span class="line">                                    <span class="keyword">echo</span> <span class="string">"&lt;option value='&#123;$data_father['id']&#125;'&gt;&#123;$data_father['module_name']&#125;&lt;/option&gt;"</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="meta">?&gt;</span></span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                请选择一个父板块</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;版块名称&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"module_name"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                版块名称不得为空，最大不得超过<span class="number">66</span>个字符</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;板块简介&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                &lt;textarea name=<span class="string">"info"</span>&gt;&lt;/textarea&gt;</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                不得多于<span class="number">255</span>个字符</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;版主&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                            &lt;select name=<span class="string">"member_id"</span>&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"0"</span>&gt;---选择一个版主---&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                请选择一个会员作为版主</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;排序&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"sort"</span> value=<span class="string">"0"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                填写一个数字即可</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                    &lt;/table&gt;</span><br><span class="line">    &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="添加" /&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br><span class="line">                           </span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们还需验证，所以在inc文件中创建<code>check_son_module.inc.php</code>文件<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(!is_numeric($_POST[<span class="string">'father_module_id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">' 所属父板块不能为空'</span>);</span><br><span class="line">&#125;</span><br><span class="line">$query=<span class="string">"select * from father_module where id=&#123;$_POST['father_module_id']&#125;"</span>;</span><br><span class="line">$result=execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(mysqli_num_rows($result)==<span class="number">0</span>)&#123;</span><br><span class="line">    skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">' 所属父板块不存在'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">empty</span>($_POST[<span class="string">'module_name'</span>]))&#123;</span><br><span class="line">	skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'子版块名称不得为空！'</span>);</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">if</span>(mb_strlen($_POST[<span class="string">'module_name'</span>])&gt;<span class="number">66</span>)&#123;</span><br><span class="line">      skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'子版块名称不得多余66个字符！'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">$_POST=escape($link,$_POST);</span><br><span class="line">	<span class="keyword">switch</span> ($check_flag)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">			$query=<span class="string">"select * from son_module where module_name='&#123;$_POST['module_name']&#125;'"</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'update'</span>:</span><br><span class="line">			$query=<span class="string">"select * from son_module where module_name='&#123;$_POST['module_name']&#125;' and id!=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'$check_flag参数错误！'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">$result=execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(mysqli_num_rows($result))&#123;</span><br><span class="line">    skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'这个子板块已经有了'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(mb_strlen($_POST[<span class="string">'info'</span>])&gt;<span class="number">255</span>)&#123;</span><br><span class="line">	skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'子版块简介不得多于255个字符！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!is_numeric($_POST[<span class="string">'sort'</span>]))&#123;</span><br><span class="line">	skip(<span class="string">'son_module_add.php'</span>,<span class="string">'error'</span>,<span class="string">'排序只能是数字！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601162610436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><code>son_module_delete.php</code>子版块删除<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//子版块删除页面</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'子板块删除页'</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])||!is_numeric($_GET[<span class="string">'id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'id参数错误!'</span>);</span><br><span class="line">&#125;</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'子版块删除页面'</span>;</span><br><span class="line">$query=<span class="string">"delete from son_module where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">execute($link,$query);</span><br><span class="line"><span class="comment">//mysqli_affected_rows() 函数返回前一次 MySQL 操作（SELECT、INSERT、UPDATE、REPLACE、DELETE）所影响的记录行数</span></span><br><span class="line"><span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'删除成功'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起删除失败，请重试！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>son_module_update.php</code>子板块编辑<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//子板块编辑页面</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'子版块编辑页面'</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])||!is_numeric($_GET[<span class="string">'id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'father_module.php'</span>,<span class="string">'error'</span>,<span class="string">'id参数错误！'</span>);</span><br><span class="line">&#125;</span><br><span class="line">$query=<span class="string">"select * from son_module where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">$result=execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(!mysqli_num_rows($result))&#123;</span><br><span class="line">    skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'这条板块信息不存在'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改加验证</span></span><br><span class="line"><span class="comment">//字符串类型的用在外面加上''，例如：module_name='&#123;$_POST['module_name']&#125;'</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $check_flag=<span class="string">'update'</span>;</span><br><span class="line">    <span class="keyword">include</span> <span class="string">'inc/check_son_module.inc.php'</span>;</span><br><span class="line">    $query=<span class="string">"update son_module set father_module_id=&#123;$_POST['father_module_id']&#125;,module_name='&#123;$_POST['module_name']&#125;',info='&#123;$_POST['info']&#125;',member_id=&#123;$_POST['member_id']&#125;,sort=&#123;$_POST['sort']&#125; where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">    execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">        skip(<span class="string">'son_module.php'</span>,<span class="string">'ok'</span>,<span class="string">'恭喜你，修改成功！'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        skip(<span class="string">'son_module.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起，修改失败，请重试！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$data=mysqli_fetch_assoc($result);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bg_wrapper"</span>&gt;     </span><br><span class="line">                &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                    &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                        &lt;div class="jquery_tab"&gt;</span><br><span class="line">                            &lt;div class="content_block"&gt;</span><br><span class="line">                                &lt;h2 class="jquery_tab_title"&gt;修改子板块——&lt;?php echo $data['module_name']?&gt;&lt;/h2&gt;</span><br><span class="line">                &lt;div class="explain"&gt;</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;（*＾-＾*）&lt;/li&gt;</span><br><span class="line">                        &lt;li&gt;<span class="string">"*★,°*:.☆(￣▽￣)/$:*.°★* 。"</span>&lt;/li&gt;</span><br><span class="line">                    &lt;/ul&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">        &lt;form method=<span class="string">"post"</span>&gt;</span><br><span class="line">                    &lt;table class="au"&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;父板块&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                            &lt;select name=<span class="string">"father_module_id"</span>&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"0"</span>&gt;---选择一个父板块---&lt;/option&gt;</span><br><span class="line">                                <span class="meta">&lt;?php</span></span><br><span class="line">                                $query=<span class="string">"select * from father_module"</span>;</span><br><span class="line">                                $result_father=execute($link,$query);</span><br><span class="line">                                <span class="keyword">while</span>($data_father=mysqli_fetch_assoc($result_father))&#123;</span><br><span class="line">                                    <span class="keyword">if</span>($data[<span class="string">'father_module_id'</span>]==$data_father[<span class="string">'id'</span>])&#123;</span><br><span class="line">                                        <span class="keyword">echo</span> <span class="string">"&lt;option selected='selected' value='&#123;$data_father['id']&#125;'&gt;&#123;$data_father['module_name']&#125;&lt;/option&gt;"</span>;</span><br><span class="line">                                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                    <span class="keyword">echo</span> <span class="string">"&lt;option value='&#123;$data_father['id']&#125;'&gt;&#123;$data_father['module_name']&#125;&lt;/option&gt;"</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                                <span class="meta">?&gt;</span></span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                选择要修改的父板块</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;版块名称&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"module_name"</span> value=<span class="string">"&lt;?php echo $data['module_name']?&gt;"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                修改板块名称，最大不得超过<span class="number">66</span>个字符</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;板块简介&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                &lt;textarea name=<span class="string">"info"</span>&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $data[<span class="string">'info'</span>]<span class="meta">?&gt;</span>&lt;/textarea&gt;</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                修改简介，不得多于<span class="number">255</span>个字符</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;版主&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                            &lt;select name=<span class="string">"member_id"</span>&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"0"</span>&gt;---选择一个版主---&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                修改版主</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;排序&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"sort"</span> value=<span class="string">"&lt;?php echo $data['sort']?&gt;"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                修改排序</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                    &lt;/table&gt;</span><br><span class="line">    &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="修改" /&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br><span class="line">                           </span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/201906011631423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这样子板块和父板块基本功能都已经实现了。</p>
<p><strong>后台开发-管理员</strong><br>我们需要创建管理员添加功能和管理员列表，在此之前先建<code>manage</code>表<br>添加字段<br><img src="https://img-blog.csdnimg.cn/2019060116350383.png" alt="在这里插入图片描述"><br><code>manage.php</code>管理员列表<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'管理员列表页'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bg_wrapper"</span>&gt;</span><br><span class="line">                </span><br><span class="line">                    &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                        &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                            &lt;div class="jquery_tab"&gt;</span><br><span class="line">                                &lt;div class="content_block"&gt;</span><br><span class="line">                                    &lt;h2 class="jquery_tab_title"&gt;管理员列表页&lt;/h2&gt;</span><br><span class="line">                    &lt;div class="explain"&gt;</span><br><span class="line">                    </span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">          </span><br><span class="line">        &lt;table class="list"&gt;</span><br><span class="line">            &lt;tr&gt;      </span><br><span class="line">                &lt;th&gt;管理员名称&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;管理等级&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;创建日期&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            <span class="meta">&lt;?php</span></span><br><span class="line">            $query=<span class="string">"select * from manage"</span>;</span><br><span class="line">            $result=execute($link,$query);</span><br><span class="line">            <span class="keyword">while</span> ($data=mysqli_fetch_assoc($result))&#123;</span><br><span class="line">                <span class="keyword">if</span>($data[<span class="string">'level'</span>]==<span class="number">0</span>)&#123;</span><br><span class="line">                    $data[<span class="string">'level'</span>]=<span class="string">'超级管理员'</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $data[<span class="string">'level'</span>]=<span class="string">'普通管理员'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            $url=urlencode(<span class="string">"manage_delete.php?id=&#123;$data['id']&#125;"</span>);</span><br><span class="line">            $return_url=urlencode($_SERVER[<span class="string">'REQUEST_URI'</span>]);</span><br><span class="line">            $message=<span class="string">"要删除管理员 &#123;$data['name']&#125; 吗？"</span>;</span><br><span class="line">            $delete_url=<span class="string">"confirm.php?url=&#123;$url&#125;&amp;return_url=&#123;$return_url&#125;&amp;message=&#123;$message&#125;"</span>;</span><br><span class="line">$html=<span class="string">&lt;&lt;&lt;A</span></span><br><span class="line"><span class="string">              &lt;tr&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['name']&#125;</span>[id:<span class="subst">&#123;$data['id']&#125;</span>]&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['level']&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;<span class="subst">&#123;$data['create_time']&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">                &lt;td&gt;&lt;a href="<span class="subst">&#123;$delete_url&#125;</span>"&gt;[删除]&lt;/a&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">             &lt;/tr&gt;</span></span><br><span class="line"><span class="string">A;</span></span><br><span class="line"><span class="keyword">echo</span> $html;</span><br><span class="line">                        &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601163724291.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><code>manage_delete.php</code>管理员删除功能<br>代码如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//子版块删除页面</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])||!is_numeric($_GET[<span class="string">'id'</span>]))&#123;</span><br><span class="line">    skip(<span class="string">'manage.php'</span>,<span class="string">'error'</span>,<span class="string">'id参数错误!'</span>);</span><br><span class="line">&#125;</span><br><span class="line">$link=connect();</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'管理员删除页面'</span>;</span><br><span class="line">$query=<span class="string">"delete from manage where id=&#123;$_GET['id']&#125;"</span>;</span><br><span class="line">execute($link,$query);</span><br><span class="line"><span class="comment">//mysqli_affected_rows() 函数返回前一次 MySQL 操作（SELECT、INSERT、UPDATE、REPLACE、DELETE）所影响的记录行数</span></span><br><span class="line"><span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">    skip(<span class="string">'manage.php'</span>,<span class="string">'ok'</span>,<span class="string">'删除成功'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'manage.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起删除失败，请重试！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>manage_add.php</code>管理员添加功能<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$template[<span class="string">'title'</span>]=<span class="string">'管理员添加页'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $check_flag=<span class="string">'add'</span>;</span><br><span class="line">    <span class="keyword">include</span> <span class="string">'inc/check_manage.inc.php'</span>;</span><br><span class="line">    $query=<span class="string">"insert into manage(name,pw,create_time,level) values('&#123;$_POST['name']&#125;',md5(&#123;$_POST['pw']&#125;),now(),&#123;$_POST['level']&#125;)"</span>;</span><br><span class="line">    execute($link,$query);</span><br><span class="line"><span class="keyword">if</span>(mysqli_affected_rows($link)==<span class="number">1</span>)&#123;</span><br><span class="line">    skip(<span class="string">'manage.php'</span>,<span class="string">'ok'</span>,<span class="string">'恭喜你，添加成功！'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    skip(<span class="string">'manage.php'</span>,<span class="string">'error'</span>,<span class="string">'对不起，添加失败，请重试！'</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/header.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bg_wrapper"</span>&gt;     </span><br><span class="line">                &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                    &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line">                        &lt;div class="jquery_tab"&gt;</span><br><span class="line">                            &lt;div class="content_block"&gt;</span><br><span class="line">                                &lt;h2 class="jquery_tab_title"&gt;添加管理员&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class="explain"&gt;</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;（*＾-＾*）&lt;/li&gt;</span><br><span class="line">                        &lt;li&gt;(o゜▽゜)o☆&lt;/li&gt;</span><br><span class="line">                        &lt;li&gt;(●<span class="string">'◡'</span>●)&lt;/li&gt;</span><br><span class="line">                    &lt;/ul&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">        &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">        &lt;form method=<span class="string">"post"</span>&gt;</span><br><span class="line">                    &lt;table class="au"&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;管理员名称&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"name"</span> type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                名称不得为空</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;密码&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;&lt;input name=<span class="string">"pw"</span>  type=<span class="string">"text"</span> /&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                密码不得低于六位</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                        &lt;tr&gt;</span><br><span class="line">                            &lt;td&gt;等级&lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                &lt;select name=<span class="string">"level"</span>&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"1"</span>&gt;普通管理员&lt;/option&gt;</span><br><span class="line">                                &lt;option value=<span class="string">"0"</span>&gt;超级管理员&lt;/option&gt;</span><br><span class="line">                                &lt;/select&gt;</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                            &lt;td&gt;</span><br><span class="line">                                请选择一个等级</span><br><span class="line">                            &lt;/td&gt;</span><br><span class="line">                        &lt;/tr&gt;</span><br><span class="line">                    &lt;/table&gt;</span><br><span class="line">    &lt;input style="margin-top:20px;cursor:pointer;" class="btn" type="submit" name="submit" value="添加" /&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">                                &lt;/div&gt;&lt;!--end content_block--&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/div&gt;&lt;!-- end jquery_tab --&gt;</span><br><span class="line">                           </span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/left.inc.php'</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'inc/footer.inc.php'</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>有往数据库中添加的，我们必须验证，所以再创建一个验证的文件<br><code>check_manage.inc.php</code>验证添加管理员<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">empty</span>($_POST[<span class="string">'name'</span>]))&#123;</span><br><span class="line">      skip(<span class="string">'manage_add.php'</span>,<span class="string">'error'</span>,<span class="string">'管理名称不得为空'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mb_strlen($_POST[<span class="string">'name'</span>])&gt;<span class="number">32</span>)&#123;</span><br><span class="line">        skip(<span class="string">'manage_add.php'</span>,<span class="string">'error'</span>,<span class="string">'管理员名称不得多于32个字符'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mb_strlen($_POST[<span class="string">'name'</span>])&lt;<span class="number">6</span>)&#123;</span><br><span class="line">        skip(<span class="string">'manage_add.php'</span>,<span class="string">'error'</span>,<span class="string">'密码不得少于6位'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $_POST=escape($link,$_POST);</span><br><span class="line">    $query=<span class="string">"select * from manage where name='&#123;$_POST['name']&#125;'"</span>;</span><br><span class="line">    $result=execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_num_rows($result))&#123;</span><br><span class="line">        skip(<span class="string">'manage_add.php'</span>,<span class="string">'error'</span>,<span class="string">'该管理员名称以及存在'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//默认传过来的是字符串</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">isset</span>($_POST[<span class="string">'level'</span>]))&#123;</span><br><span class="line">        $_POST[<span class="string">'level'</span>]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>($_POST[<span class="string">'level'</span>]==<span class="string">'0'</span>)&#123;</span><br><span class="line">        $_POST[<span class="string">'level'</span>]==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>($_POST[<span class="string">'level'</span>]==<span class="string">'1'</span>)&#123;</span><br><span class="line">        $_POST[<span class="string">'level'</span>]==<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $_POST[<span class="string">'level'</span>]==<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601164306355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我们这里0代表超级管理员，1代表普通管理员，唯一的区别就是普通管理员没有权限去添加管理员，而超级管理员有这个功能。这个功能稍后开发，接下来我们开发登陆页面和后台首页。<br>后台首页<code>index.php</code><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/is_manage_login.inc.php'</span>;</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select * from manage where id=&#123;$_SESSION['manage']['id']&#125;"</span>;</span><br><span class="line">$result_manage=execute($link, $query);</span><br><span class="line">$data_manage=mysqli_fetch_assoc($result_manage);</span><br><span class="line"><span class="keyword">if</span>($data_manage[<span class="string">'level'</span>]==<span class="string">'0'</span>)&#123;</span><br><span class="line">	$data_manage[<span class="string">'level'</span>]=<span class="string">'超级管理员'</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	$data_manage[<span class="string">'level'</span>]=<span class="string">'普通管理员'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select count(*) from father_module"</span>;</span><br><span class="line">$count_father_module=num($link,$query);</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select count(*) from son_module"</span>;</span><br><span class="line">$count_son_module=num($link,$query);</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select count(*) from content"</span>;</span><br><span class="line">$count_content=num($link,$query);</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select count(*) from reply"</span>;</span><br><span class="line">$count_reply=num($link,$query);</span><br><span class="line">                            </span><br><span class="line">$query=<span class="string">"select count(*) from member"</span>;</span><br><span class="line">$count_member=num($link,$query);</span><br><span class="line"></span><br><span class="line">$query=<span class="string">"select count(*) from manage"</span>;</span><br><span class="line">$count_manage=num($link,$query);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE html <span class="keyword">PUBLIC</span> <span class="string">"-//W3C//DTD XHTML 1.0 Strict//EN"</span> <span class="string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"</span>&gt;</span><br><span class="line">&lt;html xmlns=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    </span><br><span class="line">        &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span><br><span class="line">        &lt;meta name=<span class="string">"description"</span> content=<span class="string">"Reflect Template"</span> /&gt;</span><br><span class="line">		&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=EmulateIE7"</span> /&gt;</span><br><span class="line">        &lt;title&gt;后台首页&lt;/title&gt;</span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"css/style_all.css"</span> type=<span class="string">"text/css"</span> media=<span class="string">"screen"</span> /&gt;</span><br><span class="line">  </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        &lt;!-- to choose another color scheme uncomment one of the foloowing stylesheets <span class="keyword">and</span> wrap styl1.css into a comment --&gt;</span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"css/style8.css"</span> type=<span class="string">"text/css"</span> media=<span class="string">"screen"</span> /&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"css/jquery-ui.css"</span> type=<span class="string">"text/css"</span> media=<span class="string">"screen"</span> /&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"ueditor1_2_2_0-utf8-php/themes/default/ueditor.css"</span> type=<span class="string">"text/css"</span> media=<span class="string">"screen"</span> /&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!--Internet Explorer Trancparency fix--&gt;</span><br><span class="line">        &lt;!--[<span class="keyword">if</span> IE <span class="number">6</span>]&gt;</span><br><span class="line">        &lt;script src=<span class="string">"js/ie6pngfix.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">          DD_belatedPNG.fix(<span class="string">'#head, a, a span, img, .message p, .click_to_close, .ie6fix'</span>);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">        &lt;![<span class="keyword">endif</span>]--&gt; </span><br><span class="line">        </span><br><span class="line">        &lt;script type=<span class="string">'text/javascript'</span> src=<span class="string">'js/all-ck.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=<span class="string">'text/javascript'</span> src=<span class="string">'ueditor1_2_2_0-utf8-php/editor_config.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=<span class="string">'text/javascript'</span> src=<span class="string">'js/custom.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div id=<span class="string">"top"</span>&gt;</span><br><span class="line">            &lt;div id=<span class="string">"head"</span>&gt;</span><br><span class="line">                &lt;h1 class="logo"&gt;</span><br><span class="line">                    &lt;a href=<span class="string">"index.php"</span>&gt;&lt;/a&gt;</span><br><span class="line">                &lt;/h1&gt;</span><br><span class="line">                &lt;div class="head_memberinfo"&gt;</span><br><span class="line">                    &lt;div class="head_memberinfo_logo"&gt;</span><br><span class="line">                        &lt;span&gt;<span class="number">1</span>&lt;/span&gt;</span><br><span class="line">                        &lt;img src=<span class="string">"images/unreadmail.png"</span> alt=<span class="string">""</span>/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    </span><br><span class="line">                    &lt;span <span class="class"><span class="keyword">class</span>='<span class="title">memberinfo_span</span>'&gt;</span></span><br><span class="line">                       欢迎 &lt;a href="index.php"&gt;且听风吟&lt;/a&gt;</span><br><span class="line">                   &lt;/span&gt;</span><br><span class="line">                &lt;span&gt;</span><br><span class="line">                    &lt;a href=<span class="string">"logout.php"</span>&gt;登出&lt;/a&gt;</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">                &lt;span <span class="class"><span class="keyword">class</span>='<span class="title">memberinfo_span2</span>'&gt;</span></span><br><span class="line">                    &lt;a href="index.php"&gt;1 条私信&lt;/a&gt;</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!--end head_memberinfo--&gt;</span><br><span class="line">            </span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">            &lt;!--end head--&gt;</span><br><span class="line">           	</span><br><span class="line">            	&lt;div id=<span class="string">"bg_wrapper"</span>&gt;</span><br><span class="line">                </span><br><span class="line">                    &lt;div id=<span class="string">"main"</span>&gt;</span><br><span class="line">                        &lt;div id=<span class="string">"content"</span>&gt;</span><br><span class="line"></span><br><span class="line">                                    &lt;h2 class="jquery_tab_title"&gt;快速入口&lt;/h2&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button1" href="index.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;系统信息&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;查看系统信息&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button2" href="manage.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;管理员&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;查看当前管理员&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button3" href="manage_add.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;添加管理员&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;添加一个新的用户&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button4" href="father_module_add.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;添加父板块&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;添加父板块&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button5" href="father_module.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;父板块列表&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;搜索已经存在的父板块列表&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button7" href="son_module.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading two_lines"&gt;子版块列表&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;查看子版块列表&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button8" href="son_module_add.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;添加子版块&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;添加子版块&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button9" href="../index.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading two_lines"&gt;帖子管理&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;对帖子进行管理&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button10" href="member.php"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading two_lines"&gt;用户列表&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;查看用户&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button11" href="#"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;画廊&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;管理您的图片库&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;a class="dashboard_button button12" href="#"&gt;</span><br><span class="line">                                        &lt;span class="dashboard_button_heading"&gt;帮助&lt;/span&gt;</span><br><span class="line">                                        &lt;span&gt;如有问题，请点击&lt;/span&gt;</span><br><span class="line">                                    &lt;/a&gt;&lt;!--end dashboard_button--&gt;</span><br><span class="line">                                    </span><br><span class="line">                            &lt;h2&gt;当前管理员&lt;/h2&gt;</span><br><span class="line">                            &lt;div&gt;</span><br><span class="line">                                &lt;p&gt;</span><br><span class="line">                                    你好 管理员:<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_SESSION[<span class="string">'manage'</span>][<span class="string">'name'</span>]<span class="meta">?&gt;</span></span><br><span class="line">                                &lt;/p&gt;</span><br><span class="line">                                &lt;p&gt;</span><br><span class="line">                                    你的管理等级为:<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $data_manage[<span class="string">'level'</span>]<span class="meta">?&gt;</span></span><br><span class="line">                                &lt;/p&gt;</span><br><span class="line">                                &lt;p&gt;</span><br><span class="line">                                    创建时间为:<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $data_manage[<span class="string">'create_time'</span>]<span class="meta">?&gt;</span></span><br><span class="line">                                &lt;/p&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;h2&gt;统计信息&lt;/h2&gt;</span><br><span class="line">                            &lt;div&gt;</span><br><span class="line">                                &lt;table&gt;</span><br><span class="line">                                    &lt;tr&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;父版块 &lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_father_module<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;子版块&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_son_module<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;帖子&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_content<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;回复&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_reply<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;会员&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_member<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;管理员&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $count_manage<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                    &lt;/tr&gt;</span><br><span class="line">                                &lt;/table&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;h2&gt;系统信息&lt;/h2&gt;</span><br><span class="line">                            &lt;div&gt;</span><br><span class="line">                                &lt;table&gt;</span><br><span class="line">                                    &lt;tr&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;服务器操作系统： &lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> PHP_OS<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;服务器软件：&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_SERVER[<span class="string">'SERVER_SOFTWARE'</span>]<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;MySQL 版本： &lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span>  mysqli_get_server_info($link)<span class="meta">?&gt;</span>&lt;/&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;最大上传文件：&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> ini_get(<span class="string">'upload_max_filesize'</span>)<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;内存限制：&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> ini_get(<span class="string">'memory_limit'</span>)<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                    &lt;/tr&gt;</span><br><span class="line">                                &lt;/table&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;h2&gt;程序信息&lt;/h2&gt;</span><br><span class="line">                            &lt;div&gt;</span><br><span class="line">                               &lt;table&gt;</span><br><span class="line">                                   &lt;tr&gt;</span><br><span class="line">                                       &lt;th class="specalt"&gt;程序安装位置(绝对路径)&lt;/th&gt;</span><br><span class="line">                                       &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> SA_PATH<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                       &lt;th class="specalt"&gt;程序在web根目录下的位置(首页的url地址)：&lt;/th&gt;</span><br><span class="line">                                       &lt;td&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> SUB_URL<span class="meta">?&gt;</span>&lt;/td&gt;</span><br><span class="line">                                   &lt;/tr&gt;</span><br><span class="line">                                   &lt;tr&gt;</span><br><span class="line">                                       &lt;th class="specalt"&gt;程序作者：且听风吟&lt;/th&gt;</span><br><span class="line">                                       &lt;td&gt;作者喜欢旅游，是个吃货&lt;/td&gt;</span><br><span class="line">                                   &lt;/tr&gt;</span><br><span class="line">                               &lt;/table&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;h2&gt;安全信息&lt;/h2&gt;</span><br><span class="line">                            &lt;div&gt;</span><br><span class="line">                                &lt;table&gt;</span><br><span class="line">                                    &lt;tr&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;SQL注入&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;无&lt;/td&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;XSS攻击&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;无&lt;/td&gt;</span><br><span class="line">                                    &lt;/tr&gt;</span><br><span class="line">                                    &lt;tr&gt;</span><br><span class="line">                                        &lt;th class="specalt"&gt;最近检查日期:&lt;/th&gt;</span><br><span class="line">                                        &lt;td&gt;<span class="number">2019</span><span class="number">-05</span><span class="number">-06</span>&lt;/td&gt;</span><br><span class="line">                                    &lt;/tr&gt;</span><br><span class="line">                                &lt;/table&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;!--end content--&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/div&gt;&lt;!--end main--&gt;</span><br><span class="line">                    </span><br><span class="line">                    &lt;div id=<span class="string">"sidebar"</span>&gt;</span><br><span class="line">                        &lt;ul class="nav"&gt;</span><br><span class="line">                            &lt;li&gt;&lt;a class="headitem item1" href="#"&gt;系统&lt;/a&gt;</span><br><span class="line">                                &lt;ul&gt;&lt;!-- ul items without this <span class="class"><span class="keyword">class</span> <span class="title">get</span> <span class="title">hiddden</span> <span class="title">by</span> <span class="title">jquery</span>--&gt;</span></span><br><span class="line">                                    &lt;li&gt;&lt;a href="index.php"&gt;系统信息&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"manage.php"</span>&gt;管理员&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"manage_add.php"</span>&gt;添加管理员&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"web_set.php"</span>&gt;站点设置&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                &lt;/ul&gt;</span><br><span class="line">                            &lt;/li&gt;</span><br><span class="line">                            &lt;li&gt;&lt;a class="headitem item4" href="#"&gt;内容管理&lt;/a&gt;</span><br><span class="line">                                &lt;ul&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"father_module.php"</span>&gt;父板块列表&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"father_module_add.php"</span>&gt;添加父板块&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"son_module.php"</span>&gt;子版块列表&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"son_module_add.php"</span>&gt;添加子版块&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"../index.php"</span>&gt;帖子管理&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                &lt;/ul&gt;</span><br><span class="line">                            &lt;/li&gt;</span><br><span class="line">                            &lt;li&gt;&lt;a class="headitem item5" href="#"&gt;用户搜索&lt;/a&gt;</span><br><span class="line">                                &lt;ul&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"member.php"</span>&gt;用户列表&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                &lt;/ul&gt;</span><br><span class="line">                            &lt;/li&gt;</span><br><span class="line">                            &lt;!--end subnav--&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;div class="flexy_datepicker"&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;ul&gt;</span><br><span class="line">                            &lt;li&gt;&lt;a class="headitem item7" href="#"&gt;博客浏览&lt;/a&gt;</span><br><span class="line">                                &lt;ul&gt;</span><br><span class="line">                                    &lt;li&gt;&lt;a href=<span class="string">"https://bealright.github.io/"</span>&gt;博客&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                                &lt;/ul&gt;</span><br><span class="line">                            &lt;/li&gt;</span><br><span class="line">                        &lt;/ul&gt;     </span><br><span class="line"></span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                    &lt;!--end sidebar--&gt;</span><br><span class="line">                        </span><br><span class="line">                     &lt;/div&gt;&lt;!--end bg_wrapper--&gt;</span><br><span class="line">                     </span><br><span class="line">                &lt;div id=<span class="string">"footer"</span> style=<span class="string">"color: #fff;text-align: center"</span>&gt;</span><br><span class="line">                <span class="keyword">TRY</span> YOUR BEST!!!&lt;a href=<span class="string">"https://bealright.github.io/"</span> target=<span class="string">"_blank"</span> title=<span class="string">"且听风吟"</span>&gt;且听风吟&lt;/a&gt;</span><br><span class="line">                &lt;/div&gt;&lt;!--end footer--&gt;</span><br><span class="line">                </span><br><span class="line">        &lt;/div&gt;&lt;!-- end top --&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里的一些php代码包含了系统信息这个功能<br>实现效果：<br><img src="https://img-blog.csdnimg.cn/20190601164605623.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>接下来是<code>login.php</code>登陆页面，但在此之前我们需要做一个验证登陆的文件<br><code>tool.inc.php</code>跳转+验证登陆功能<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">skip</span><span class="params">($url,$pic,$message)</span></span>&#123;</span><br><span class="line">$html=<span class="string">&lt;&lt;&lt;A</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang="zh-CN"&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;meta charset="utf-8" /&gt;</span></span><br><span class="line"><span class="string">&lt;meta http-equiv="refresh" content="3;URL=<span class="subst">&#123;$url&#125;</span>" /&gt;</span></span><br><span class="line"><span class="string">&lt;title&gt;正在跳转中&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;link rel="stylesheet" type="text/css" href="style/remind.css" /&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;div class="notice"&gt;&lt;span class="pic <span class="subst">&#123;$pic&#125;</span>"&gt;&lt;/span&gt; <span class="subst">&#123;$message&#125;</span> &lt;a href="<span class="subst">&#123;$url&#125;</span>"&gt;3秒后自动跳转中!&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">A;</span></span><br><span class="line"><span class="keyword">echo</span> $html;</span><br><span class="line"><span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//验证前台用户是否登陆</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is_login</span><span class="params">($link)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>($_COOKIE[<span class="string">'bbs'</span>][<span class="string">'name'</span>]) &amp;&amp; <span class="keyword">isset</span>($_COOKIE[<span class="string">'bbs'</span>][<span class="string">'pw'</span>]))&#123;</span><br><span class="line">		$query=<span class="string">"select * from member where name='&#123;$_COOKIE['bbs']['name']&#125;' and sha1(pw)='&#123;$_COOKIE['bbs']['pw']&#125;'"</span>;</span><br><span class="line">		$result=execute($link,$query);</span><br><span class="line">		<span class="keyword">if</span>(mysqli_num_rows($result)==<span class="number">1</span>)&#123;</span><br><span class="line">			$data=mysqli_fetch_assoc($result);</span><br><span class="line">			<span class="keyword">return</span> $data[<span class="string">'id'</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_user</span><span class="params">($member_id,$content_member_id,$is_manage_login)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>($member_id==$content_member_id || $is_manage_login)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//验证后台用户是否登陆</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is_manage_login</span><span class="params">($link)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>($_SESSION[<span class="string">'manage'</span>][<span class="string">'name'</span>]) &amp;&amp; <span class="keyword">isset</span>($_SESSION[<span class="string">'manage'</span>][<span class="string">'pw'</span>]))&#123;</span><br><span class="line">		$query=<span class="string">"select * from manage where name='&#123;$_SESSION['manage']['name']&#125;' and sha1(pw)='&#123;$_SESSION['manage']['pw']&#125;'"</span>;</span><br><span class="line">		$result=execute($link,$query);</span><br><span class="line">		<span class="keyword">if</span>(mysqli_num_rows($result)==<span class="number">1</span>)&#123;</span><br><span class="line">			$data=mysqli_fetch_assoc($result);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>login.php</code>登陆页面<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'../inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line"><span class="keyword">if</span>(is_manage_login($link))&#123;</span><br><span class="line">    skip(<span class="string">'index.php'</span>,<span class="string">'ok'</span>,<span class="string">'请不用重复登陆'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="keyword">include_once</span> <span class="string">'inc/check_login.inc.php'</span>;</span><br><span class="line">    $query=<span class="string">"select * from manage where name='&#123;$_POST['name']&#125;' and pw=md5('&#123;$_POST['pw']&#125;')"</span>;</span><br><span class="line">    $result=execute($link,$query);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_num_rows($result)==<span class="number">1</span>)&#123;</span><br><span class="line">        $data=mysqli_fetch_assoc($result);</span><br><span class="line">        $_SESSION[<span class="string">'manage'</span>][<span class="string">'name'</span>]=$data[<span class="string">'name'</span>];</span><br><span class="line">        $_SESSION[<span class="string">'manage'</span>][<span class="string">'pw'</span>]=sha1($data[<span class="string">'pw'</span>]);</span><br><span class="line">        $_SESSION[<span class="string">'manage'</span>][<span class="string">'id'</span>]=$data[<span class="string">'id'</span>];</span><br><span class="line">        $_SESSION[<span class="string">'manage'</span>][<span class="string">'level'</span>]=$data[<span class="string">'level'</span>];</span><br><span class="line">        skip(<span class="string">'index.php'</span>,<span class="string">'ok'</span>,<span class="string">'登陆成功'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        skip(<span class="string">'login.php'</span>,<span class="string">'error'</span>,<span class="string">'用户名或密码错误'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en" class="no-js"&gt;</span><br><span class="line"></span><br><span class="line">    &lt;head&gt;</span><br><span class="line"></span><br><span class="line">        &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">        &lt;title&gt;后台登录&lt;/title&gt;</span><br><span class="line">        &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">        &lt;meta name=<span class="string">"description"</span> content=<span class="string">""</span>&gt;</span><br><span class="line">        &lt;meta name=<span class="string">"author"</span> content=<span class="string">""</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- CSS --&gt;</span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"assets/css/reset.css"</span>&gt;</span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"assets/css/supersized.css"</span>&gt;</span><br><span class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"assets/css/style.css"</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- HTML5 shim, <span class="keyword">for</span> IE6<span class="number">-8</span> support of HTML5 elements --&gt;</span><br><span class="line">        &lt;!--[<span class="keyword">if</span> lt IE <span class="number">9</span>]&gt;</span><br><span class="line">            &lt;script src=<span class="string">"assets/js/html5.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">        &lt;![<span class="keyword">endif</span>]--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class="page-container"&gt;</span><br><span class="line">            &lt;h1&gt;登录(Login)&lt;/h1&gt;</span><br><span class="line">            &lt;form action=<span class="string">""</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">                &lt;input type="text" name="name" class="text" placeholder="请输入您的用户名！"&gt;</span><br><span class="line">                &lt;input type="password" name="pw" class="text" placeholder="请输入您的用户密码！"&gt;</span><br><span class="line">                &lt;button type="submit" class="submit" name="submit"&gt;登录&lt;/button&gt;</span><br><span class="line">                &lt;div class="error"&gt;&lt;span&gt;+&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">            &lt;div class="connect"&gt;</span><br><span class="line">                &lt;p&gt;快捷&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                    &lt;a class="facebook" href=""&gt;&lt;/a&gt;</span><br><span class="line">                    &lt;a class="twitter" href=""&gt;&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">		</span><br><span class="line">        &lt;!-- Javascript --&gt;</span><br><span class="line">        &lt;script src=<span class="string">"assets/js/jquery-1.8.2.min.js"</span> &gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=<span class="string">"assets/js/supersized.3.2.7.min.js"</span> &gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=<span class="string">"assets/js/supersized-init.js"</span> &gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=<span class="string">"assets/js/scripts.js"</span> &gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>实现效果：<br><img src="https://img-blog.csdnimg.cn/2019060116521486.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>OK，这样登陆页面就完成了，有登陆就要有注销，下面做注销页面。<br> <code>logout.php</code>注销页面<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/config.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/mysql.inc.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'inc/tool.inc.php'</span>;</span><br><span class="line">$link=connect();</span><br><span class="line">setcookie(<span class="string">'bbs[name]'</span>,<span class="string">''</span>,time()<span class="number">-3600</span>);</span><br><span class="line">setcookie(<span class="string">'bbs[pw]'</span>,<span class="string">''</span>,time()<span class="number">-3600</span>);</span><br><span class="line">skip(<span class="string">'index.php'</span>,<span class="string">'ok'</span>,<span class="string">'退出成功！'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这样后台大部分功能已经完善好了，有的功能需要和前台交互，所以我们在开发前台的过程再将其完善。</p>
<p>感悟：敲的时候经常敲错、搞混、遇到报错，有时一修改就是修改几个小时，但这也许就是敲代码的乐趣所在吧，过程很难受，但找到error并改好也会有一种成就感，下一篇将继续开发前台功能，未完待续。。。。。。<br><img src="https://img-blog.csdnimg.cn/201906011658314.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNDMxMTU4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src>
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title="0" data-url="http://link.hhtjim.com/163/5146554.mp3"></li>
                    
                        <li title="1" data-url="http://link.hhtjim.com/qq/001faIUs4M2zna.mp3"></li>
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-ae="false" data-ci data-cs data-r data-o data-a data-d="false">查看评论</div>


    </div>
    
        <div class="side">
            
        </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
